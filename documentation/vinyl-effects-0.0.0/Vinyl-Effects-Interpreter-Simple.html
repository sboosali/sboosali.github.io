<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Vinyl.Effects.Interpreter.Simple</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Vinyl-Effects-Interpreter-Simple.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Vinyl-Effects-Interpreter-Simple.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">vinyl-effects-0.0.0: TODO</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Vinyl.Effects.Interpreter.Simple</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Making interpreters:</p><ul><li><code><a href="Vinyl-Effects-Interpreter-Simple.html#v:singletonInterpreter">singletonInterpreter</a></code>, from a handler</li></ul><p>Growing interpreters:</p><ul><li><code><a href="Vinyl-Effects-Interpreter-Simple.html#v:appendInterpreters">appendInterpreters</a></code></li></ul><p>Shrinking an interpreter:</p><ul><li><code><a href="Vinyl-Effects-Interpreter-Simple.html#v:downcastInterpreter">downcastInterpreter</a></code>, when it handles more than you need</li></ul><p>If you want to do more with them,
just unwrap the <code>newtype</code> and use <a href="../vinyl-0.5.2/Data-Vinyl.html">Data.Vinyl</a>.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Interpreter">Interpreter</a> m effects = <a href="#v:Interpreter">Interpreter</a> {<ul class="subs"><li><a href="#v:getInterpreter">getInterpreter</a> :: <a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a> m) effects</li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:HandlerM">HandlerM</a> m f = <a href="#v:HandlerM">HandlerM</a> {<ul class="subs"><li><a href="#v:getHandlerM">getHandlerM</a> :: <span class="keyword">forall</span> x. f (m x) -&gt; m x</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:ProductF">ProductF</a> fs a = <a href="#v:ProductF">ProductF</a> {<ul class="subs"><li><a href="#v:getProductF">getProductF</a> :: <a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Types.html#t:Apply">Apply</a> a) fs</li></ul>}</li><li class="src short"><a href="#v:interpretLanguage">interpretLanguage</a> :: <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m effects -&gt; <a href="Vinyl-Effects-Language.html#t:Language">Language</a> effects <a href="Vinyl-Effects-Types.html#t::-126--62-">:~&gt;</a> m</li><li class="src short"><a href="#v:interpretLanguageF">interpretLanguageF</a> :: <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m effects -&gt; <a href="Vinyl-Effects-Types.html#t:AnAlgebra">AnAlgebra</a> (<a href="Vinyl-Effects-Language.html#t:LanguageF">LanguageF</a> effects) (m a)</li><li class="src short"><a href="#v:singletonInterpreter">singletonInterpreter</a> :: (<span class="keyword">forall</span> x. <a href="Vinyl-Effects-Types.html#t:AnAlgebra">AnAlgebra</a> f (m x)) -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m `[f]`</li><li class="src short"><a href="#v:appendInterpreters">appendInterpreters</a> :: <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m fs -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m gs -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m (fs <a href="../vinyl-0.5.2/Data-Vinyl-TypeLevel.html#t:-43--43-">++</a> gs)</li><li class="src short"><a href="#v:downcastInterpreter">downcastInterpreter</a> :: gs <a href="../vinyl-0.5.2/Data-Vinyl-Lens.html#t:-8838-">&#8838;</a> fs =&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m fs -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m gs</li><li class="src short"><a href="#v:asInterpreter1">asInterpreter1</a> :: (<a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a> m) fs -&gt; <a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a> m) gs) -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m fs -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m gs</li><li class="src short"><a href="#v:asInterpreter2">asInterpreter2</a> :: (<a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a> m) fs -&gt; <a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a> m) gs -&gt; <a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a> m) hs) -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m fs -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m gs -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m hs</li><li class="src short"><a href="#v:fromSingletonInterpreter">fromSingletonInterpreter</a> :: <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m `[f]` -&gt; <a href="Vinyl-Effects-Types.html#t:AnAlgebra">AnAlgebra</a> f (m a)</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Interpreter" class="def">Interpreter</a> m effects <a href="src/Vinyl-Effects-Interpreter-Simple.html#Interpreter" class="link">Source</a></p><div class="doc"><p>a product of handlers.</p><p>each field holds a co-algebra:</p><pre>f (m a) -&gt; m a
</pre><p>e.g.</p><pre>runFG :: Interpreter IO '[f,g]
runFG = Interpreter $ <code><a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a></code> runF :&amp; <code><a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a></code> runG :&amp; RNil

runF :: f (m a) -&gt; m a

runG :: g (m a) -&gt; m a
</pre><p>specialization:</p><pre>Interpreter IO [f,g]
~
Rec (<code><a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a></code> IO) [f,g]
~
(HandlerM IO f, HandlerM IO g)
~
( (forall x. f (IO x) -&gt; IO x)
, (forall y. g (IO y) -&gt; IO y)
)
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Interpreter" class="def">Interpreter</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:getInterpreter" class="def">getInterpreter</a> :: <a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a> m) effects</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:HandlerM" class="def">HandlerM</a> m f <a href="src/Vinyl-Effects-Interpreter-Simple.html#HandlerM" class="link">Source</a></p><div class="doc"><p>monadically handle a functor.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:HandlerM" class="def">HandlerM</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:getHandlerM" class="def">getHandlerM</a> :: <span class="keyword">forall</span> x. f (m x) -&gt; m x</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ProductF" class="def">ProductF</a> fs a <a href="src/Vinyl-Effects-Interpreter-Simple.html#ProductF" class="link">Source</a></p><div class="doc"><p>A (1) lifted, (2) n-ary, (3) associative product.</p><p>In particular, a <code>product</code> of &quot;handlers&quot;.</p><p><code>fs</code> must all be <code>Functor</code>s.</p><p>e.g.</p><pre>ProductF [f,g] a
</pre><p>generalizes '(,)':</p><pre>ProductF '[f,g] a
~
(f a, g a)
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ProductF" class="def">ProductF</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:getProductF" class="def">getProductF</a> :: <a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Types.html#t:Apply">Apply</a> a) fs</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:interpretLanguage" class="def">interpretLanguage</a> :: <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m effects -&gt; <a href="Vinyl-Effects-Language.html#t:Language">Language</a> effects <a href="Vinyl-Effects-Types.html#t::-126--62-">:~&gt;</a> m <a href="src/Vinyl-Effects-Interpreter-Simple.html#interpretLanguage" class="link">Source</a></p><div class="doc"><p>interpret a language into some monad.</p><p>e.g.</p><pre>interpretLanguage anInterpreter aLanguage :: m ()
</pre><p>calls <code><a href="Vinyl-Effects-Language.html#v:iterLM">iterLM</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:interpretLanguageF" class="def">interpretLanguageF</a> :: <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m effects -&gt; <a href="Vinyl-Effects-Types.html#t:AnAlgebra">AnAlgebra</a> (<a href="Vinyl-Effects-Language.html#t:LanguageF">LanguageF</a> effects) (m a) <a href="src/Vinyl-Effects-Interpreter-Simple.html#interpretLanguageF" class="link">Source</a></p><div class="doc"><p>you consume a coproduct with a product of consumers
i.e. you must handle every case.</p><p>like <code><a href="../vinyl-sum-0.0.0/Vinyl-CoRec.html#v:match">match</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:singletonInterpreter" class="def">singletonInterpreter</a> :: (<span class="keyword">forall</span> x. <a href="Vinyl-Effects-Types.html#t:AnAlgebra">AnAlgebra</a> f (m x)) -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m `[f]` <a href="src/Vinyl-Effects-Interpreter-Simple.html#singletonInterpreter" class="link">Source</a></p><div class="doc"><p>make a interpreter from a single handler.</p><p>e.g.</p><pre>data ClipboardF k = GetClipboard (String -&gt; k) | SetClipboard String k deriving Functor

clipboardInterpreter :: Interpreter IO '[ClipboardF] a
clipboardInterpreter = singletonInterpreter $ \case
 GetClipboard f   -&gt; ... &gt;&gt;= f
 SetClipboard s k -&gt; ... s &gt;&gt; k
</pre></div></div><div class="top"><p class="src"><a name="v:appendInterpreters" class="def">appendInterpreters</a> :: <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m fs -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m gs -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m (fs <a href="../vinyl-0.5.2/Data-Vinyl-TypeLevel.html#t:-43--43-">++</a> gs) <a href="src/Vinyl-Effects-Interpreter-Simple.html#appendInterpreters" class="link">Source</a></p><div class="doc"><p>compose two interpreters. ordered.</p></div></div><div class="top"><p class="src"><a name="v:downcastInterpreter" class="def">downcastInterpreter</a> :: gs <a href="../vinyl-0.5.2/Data-Vinyl-Lens.html#t:-8838-">&#8838;</a> fs =&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m fs -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m gs <a href="src/Vinyl-Effects-Interpreter-Simple.html#downcastInterpreter" class="link">Source</a></p><div class="doc"><p>Discard any number of handlers from the interpreter.</p></div></div><div class="top"><p class="src"><a name="v:asInterpreter1" class="def">asInterpreter1</a> :: (<a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a> m) fs -&gt; <a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a> m) gs) -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m fs -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m gs <a href="src/Vinyl-Effects-Interpreter-Simple.html#asInterpreter1" class="link">Source</a></p><div class="doc"><p>Lift a (unary) function on records to interpreters (a newtype thereof).</p><p>e.g.</p><pre><code><a href="Vinyl-Effects-Interpreter-Simple.html#v:downcastInterpreter">downcastInterpreter</a></code> = asInterpreter1 <code><a href="../vinyl-0.5.2/Data-Vinyl-Lens.html#v:rcast">rcast</a></code>
</pre></div></div><div class="top"><p class="src"><a name="v:asInterpreter2" class="def">asInterpreter2</a> :: (<a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a> m) fs -&gt; <a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a> m) gs -&gt; <a href="../vinyl-0.5.2/Data-Vinyl-Core.html#t:Rec">Rec</a> (<a href="Vinyl-Effects-Interpreter-Simple.html#t:HandlerM">HandlerM</a> m) hs) -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m fs -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m gs -&gt; <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m hs <a href="src/Vinyl-Effects-Interpreter-Simple.html#asInterpreter2" class="link">Source</a></p><div class="doc"><p>Lift an operation on records to interpreters (a newtype thereof).</p><p>e.g.</p><pre><code><a href="Vinyl-Effects-Interpreter-Simple.html#v:appendInterpreters">appendInterpreters</a></code> = asInterpreter2 (<code><a href="../vinyl-0.5.2/Data-Vinyl-Core.html#v:-60--43--62-">&lt;+&gt;</a></code>)
</pre></div></div><div class="top"><p class="src"><a name="v:fromSingletonInterpreter" class="def">fromSingletonInterpreter</a> :: <a href="Vinyl-Effects-Interpreter-Simple.html#t:Interpreter">Interpreter</a> m `[f]` -&gt; <a href="Vinyl-Effects-Types.html#t:AnAlgebra">AnAlgebra</a> f (m a) <a href="src/Vinyl-Effects-Interpreter-Simple.html#fromSingletonInterpreter" class="link">Source</a></p><div class="doc"><p>inverts <code><a href="Vinyl-Effects-Interpreter-Simple.html#v:singletonInterpreter">singletonInterpreter</a></code>, for convenient access.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>